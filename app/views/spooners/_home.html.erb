<div class="container mb-6">
  <%= render "search", spooner: spooner %>

  <div class="d-flex py-4">
    <div class="row my-2 justify-content-between">
      <% spooners.each do |spooner| %>
        <div class="card col-3 rounded d-flex justify-content-between mb-4" style="width: 280px; padding: 0px;">
          <% if spooner.img.attached? %>
            <%= cl_image_tag spooner.img.first.key, height: 280, width: 279, crop: :fill %>
          <% else %>
            <%= image_tag "person-placeholder.jpg",  width: 279 , height: 280, crop: :fill %>
          <% end %>
          <div class="card-body" style="background-color: rgb(255,143,177,0.2); padding: 10px 15px;">
            <div class="row">
              <p class="card-text d-flex align-items-center" style="margin-bottom: 0px; color: black; font-size: 20px;"><strong><%=link_to spooner.name, spooner_path(spooner), class: "text-decoration-none"%></strong></p>
              <div class="col-10">

                <p class="card-text d-flex align-items-center" style="margin-bottom: 0px; color: black;"><iconify-icon icon="mdi:silverware-spoon"></iconify-icon><%=spooner.spoon_type.capitalize%></p>
                <p class="card-text d-flex align-items-center" style="margin-bottom: 0px; color: black;"><iconify-icon icon="bx:male-female"></iconify-icon><%=spooner.gender.capitalize%></p>
                <% if spooner.reviews.size > 0 %>
                <p class="card-text d-flex align-items-center" style="margin-bottom: 0px; color: black;"><iconify-icon icon="material-symbols:star"></iconify-icon>
                <%= (spooner.reviews.reduce(0) { |sum, review| sum + review.rating }).fdiv(spooner.reviews.size) %></p>
                <% end %>
              </div>
              <div class="col-2 d-flex align-items-center justify-content-end">
                <p class="card-text" style="margin-bottom: 0px; color: black; font-size: 36px; margin-right:10px;">$<%=spooner.price%></p>
              </div>
            </div>
          </div>
        </div>
      <%end%>
    </div>
  </div>
  <%= link_to "Create a Spooner Profile", new_spooner_path, class: "btn btn-dark" %>
  <div style="width: 100%; height: 600px;"
  data-controller="map"
  data-map-markers-value="<%= @markers.to_json %>"
  data-map-api-key-value="<%= ENV['MAPBOX_API_KEY'] %>">
  </div>
</div>
